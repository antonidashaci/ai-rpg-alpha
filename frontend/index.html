<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-RPG-Alpha - Text-Based Adventure</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <h1 class="game-title">AI-RPG-Alpha</h1>
            <div class="game-subtitle">An AI-Driven Text Adventure</div>
        </header>

        <!-- Fixed Top Menu Bar -->
        <nav class="main-menu-bar">
            <ul class="menu-list">
                <li class="menu-item" id="menuMain">üè† Main Menu</li>
                <li class="menu-item" id="menuCharCreate">üßô Character Creation</li>
                <li class="menu-item" id="menuSettings">‚öôÔ∏è Settings</li>
                <li class="menu-item" id="menuSaveLoad">üíæ Save/Load</li>
                <li class="menu-item" id="menuHelp">‚ùì Help</li>
                <li class="menu-item" id="menuExit">üö™ Exit</li>
            </ul>
        </nav>

        <!-- Main Game Area -->
        <main class="game-main">
            <!-- Player Info Panel -->
            <aside class="player-panel">
                <div class="player-info">
                    <h2 class="player-name" id="playerName">Adventurer</h2>
                    <div class="scenario-info" id="scenarioInfo" style="display: none;">
                        <h3 id="scenarioName">Unknown Realm</h3>
                        <div class="scenario-genre" id="scenarioGenre">Adventure</div>
                    </div>

                    <div class="player-stats">
                        <div class="stat-group">
                            <div class="stat-item">
                                <span class="stat-label">Level</span>
                                <span class="stat-value" id="playerLevel">1</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Health</span>
                                <span class="stat-value" id="playerHealth">20/20</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">XP</span>
                                <span class="stat-value" id="playerXP">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Gold</span>
                                <span class="stat-value" id="playerGold">50</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">AC</span>
                                <span class="stat-value" id="characterAC">10</span>
                            </div>
                        </div>
                        
                        <!-- D&D Game Info -->
                        <div class="dnd-info">
                            <div class="stat-item">
                                <span class="stat-label">Location</span>
                                <span class="stat-value" id="playerLocation">Ironhold Village</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Time</span>
                                <span class="stat-value" id="gameTime">Morning</span>
                            </div>
                            <div class="stat-item" id="lastRoll" style="display: none;">
                                <span class="stat-label">üé≤ Last Roll</span>
                                <span class="stat-value" id="rollResult">-</span>
                            </div>
                        </div>
                        
                        <!-- D&D Abilities -->
                        <div class="abilities-section" id="characterAbilities">
                            <h4>üé≤ Abilities</h4>
                            <div class="abilities-loading">Rolling abilities...</div>
                        </div></div>
                        
                        <!-- BG3-Style Combat Resources -->
                        <div class="combat-resources" id="combatResources">
                            <h4>Combat Resources</h4>
                            <div class="resource-group">
                                <div class="resource-item">
                                    <span class="resource-label">‚ö° Stamina</span>
                                    <div class="resource-bar">
                                        <div class="resource-bar-fill stamina-bar" id="staminaBar" style="width: 100%"></div>
                                        <span class="resource-text" id="staminaText">100/100</span>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <span class="resource-label">üéØ Action Points</span>
                                    <div class="action-points" id="actionPoints">
                                        <span class="action-point active"></span>
                                        <span class="action-point active"></span>
                                        <span class="action-point"></span>
                                    </div>
                                </div>
                                <div class="resource-item" id="sanitySection" style="display: none;">
                                    <span class="resource-label">üß† Sanity</span>
                                    <div class="resource-bar">
                                        <div class="resource-bar-fill sanity-bar" id="sanityBar" style="width: 100%"></div>
                                        <span class="resource-text" id="sanityText">100/100</span>
                                    </div>
                                </div>
                            </div>
                        </div></div>
                        
                        <div class="attributes">
                            <div class="attribute">
                                <span class="attr-label">STR</span>
                                <span class="attr-value" id="strengthValue">10</span>
                            </div>
                            <div class="attribute">
                                <span class="attr-label">INT</span>
                                <span class="attr-value" id="intelligenceValue">10</span>
                            </div>
                            <div class="attribute">
                                <span class="attr-label">CHA</span>
                                <span class="attr-value" id="charismaValue">10</span>
                            </div>
                        </div>
                    </div>

                    <div class="location-info">
                        <h3>Location</h3>
                        <div class="current-location" id="currentLocation">Starting Village</div>
                    </div>

                    <div class="quest-section">
                        <h3>Active Quests</h3>
                        <div class="quest-list" id="questList">
                            <div class="quest-empty">No active quests</div>
                        </div>
                    </div>

                    <!-- D&D Equipment -->
                    <div class="equipment-section">
                        <div class="equipment-item" id="characterWearing">
                            <h4>üëï Wearing</h4>
                            <div class="equipment-loading">Loading...</div>
                        </div>
                        <div class="equipment-item" id="characterWielding">
                            <h4>‚öîÔ∏è Wielding</h4>
                            <div class="equipment-loading">Loading...</div>
                        </div>
                    </div>
                    
                    <!-- D&D Quest -->
                    <div class="quest-section" id="characterQuest">
                        <h4>üìú Quest</h4>
                        <p>None</p>
                    </div>

                    <div class="inventory-section">
                        <h3>üéí Inventory</h3>
                        <div class="inventory-list" id="inventoryList">
                            <div class="inventory-empty">No items</div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Game Content Area -->
            <section class="game-content">
                <!-- Narrative Display -->
                <div class="narrative-container">
                    <div class="narrative-text" id="narrativeText">
                        <div class="welcome-message">
                            <h2>üé≤ Welcome to AI-RPG-Alpha D&D Adventure!</h2>
                            <p>Enter your name to begin your epic D&D-style adventure in the realm of Tamriel. 
                            This advanced AI Game Master will guide you through a rich fantasy world with:</p>
                            <ul>
                                <li>üé≤ <strong>Real D&D 5e Rules</strong> - Dice rolls, ability checks, and combat</li>
                                <li>‚öîÔ∏è <strong>Character Progression</strong> - Level up, gain XP, and improve abilities</li>
                                <li>üè∞ <strong>Rich Storytelling</strong> - AI-powered narratives that adapt to your choices</li>
                                <li>üé≠ <strong>Multiple AI Providers</strong> - Choose between Gemini, GPT-4, or Groq</li>
                            </ul>
                            <p><strong>You are Ra'el</strong>, a 36-year-old Human Monk (Way of Shadow, Hermit background).</p>
                            <p>Your journey in the Northern Realms awaits...</p>
                        </div>
                    </div>
                </div>

                <!-- Player Input Area -->
                <div class="input-container">
                    <div class="player-setup" id="playerSetup">
                        <div class="setup-form">
                            <label for="playerNameInput">Enter your name:</label>
                            <input type="text" id="playerNameInput" placeholder="Your character name" maxlength="20">
                            <button id="startGameBtn" class="start-btn">Begin Adventure</button>
                        </div>
                    </div>

                    <div class="choice-container" id="choiceContainer" style="display: none;">
                        <h3>What do you choose?</h3>
                        <div class="choices" id="choicesList">
                            <!-- Choices will be populated by JavaScript -->
                        </div>
                    </div>

                    <div class="custom-input-container" id="customInputContainer" style="display: none;">
                        <div class="input-group">
                            <input type="text" id="customChoiceInput" placeholder="Describe your action..." maxlength="200">
                            <button id="submitCustomChoice" class="submit-btn">Submit</button>
                        </div>
                        <button id="showChoicesBtn" class="toggle-btn">Show Suggested Choices</button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Game Controls -->
        <div class="game-controls">
            <button id="toggleInputMode" class="control-btn" style="display: none;">
                <span id="inputModeText">Custom Input</span>
            </button>
            <button id="saveGameBtn" class="control-btn" style="display: none;">Save Game</button>
            <button id="loadGameBtn" class="control-btn" style="display: none;">Load Game</button>
            <button id="newGameBtn" class="control-btn" style="display: none;">New Game</button>
        </div>

        <!-- Status Messages -->
        <div class="status-container" id="statusContainer">
            <!-- Status messages will appear here -->
        </div>

        <!-- Loading Indicator -->
        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <div class="loading-text">The AI is crafting your story...</div>
            </div>
        </div>

        <!-- Audio Element for Background Music -->
        <audio id="backgroundMusic" loop>
            <source src="assets/music/calm.mp3" type="audio/mpeg">
            <source src="assets/music/mystery.mp3" type="audio/mpeg">
            <source src="assets/music/combat.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>

        <!-- Music Controls -->
        <div class="music-controls">
            <button id="toggleMusicBtn" class="music-btn" title="Toggle Music">
                <span class="music-icon">üéµ</span>
            </button>
            <div class="volume-control">
                <input type="range" id="volumeSlider" min="0" max="100" value="30" class="volume-slider">
            </div>
        </div>

        <!-- Character Creation Modal -->
        <div class="modal-overlay" id="charCreateModal" style="display:none;">
            <div class="modal-content">
                <h2>Create Your Character</h2>
                <form id="charCreateForm">
                    <label>Name:
                        <input type="text" id="charNameInput" maxlength="20" placeholder="Enter name..." required />
                    </label>
                    <label>Gender:
                        <select id="charGenderInput">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="nonbinary">Non-binary</option>
                        </select>
                    </label>
                    <label>Portrait:
                        <div id="charPortraitPreview" class="portrait-preview"></div>
                        <button type="button" id="randomPortraitBtn">üé≤ Random Portrait</button>
                    </label>
                    <label>Background:
                        <select id="charBackgroundInput">
                            <option value="hermit">Hermit</option>
                            <option value="noble">Noble</option>
                            <option value="outlander">Outlander</option>
                            <option value="acolyte">Acolyte</option>
                            <option value="soldier">Soldier</option>
                        </select>
                    </label>
                    <label>Class:
                        <select id="charClassInput">
                            <option value="monk">Monk</option>
                            <option value="wizard">Wizard</option>
                            <option value="rogue">Rogue</option>
                            <option value="fighter">Fighter</option>
                            <option value="cleric">Cleric</option>
                        </select>
                    </label>
                    <div class="ability-rolls">
                        <h4>Roll Abilities</h4>
                        <div id="abilityRolls">
                            <!-- Ability scores will be generated here -->
                        </div>
                        <button type="button" id="rollAbilitiesBtn">üé≤ Roll Abilities</button>
                        <button type="button" id="randomCharBtn">Randomize All</button>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="modal-confirm">Create Character</button>
                        <button type="button" class="modal-cancel" id="closeCharModal">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="game-footer">
        <div class="footer-content">
            <p>&copy; 2024 AI-RPG-Alpha v0.3.0 - Advanced D&D AI Game Master</p>
            <div class="footer-links">
                <span class="api-status" id="apiStatus">API: Checking...</span>
                <span class="turn-counter">Turn: <span id="turnCounter">0</span></span>
            </div>
        </div>
    </footer>

    <script src="components/settings.js"></script>
    <script src="script.js"></script>
</body>
</html>

